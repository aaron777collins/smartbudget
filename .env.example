# SmartBudget Environment Variables Template
# Copy this file to .env.local for local development
# DO NOT commit .env.local or any file containing real secrets to Git

# ============================================================================
# DATABASE
# ============================================================================

# PostgreSQL database connection string
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?options
#
# Local Development Example:
# DATABASE_URL="postgresql://postgres:password@localhost:5432/smartbudget"
#
# Neon (Production):
# DATABASE_URL="postgresql://user:password@ep-cool-darkness-123456.us-east-2.aws.neon.tech/smartbudget?sslmode=require"
#
# Supabase (Production):
# DATABASE_URL="postgresql://postgres.xxxxxxxxxxxxx:password@aws-0-us-east-1.pooler.supabase.com:6543/postgres"
#
DATABASE_URL="postgresql://postgres:password@localhost:5432/smartbudget"

# ============================================================================
# AUTHENTICATION (NextAuth.js)
# ============================================================================

# NextAuth Secret - REQUIRED
# Generate with: openssl rand -base64 32
# CRITICAL: Use a different secret for each environment (development, staging, production)
# Must be at least 32 characters long for security
NEXTAUTH_SECRET="your-secret-here-generate-with-openssl-rand-base64-32"

# NextAuth URL - REQUIRED
# The canonical URL of your site (used for callbacks and redirects)
# Local Development:
# NEXTAUTH_URL="http://localhost:3000"
# Production:
# NEXTAUTH_URL="https://smartbudget.com"
NEXTAUTH_URL="http://localhost:3000"

# Admin Emails - REQUIRED for admin operations
# Comma-separated list of email addresses that have admin privileges
# Admins can access admin-only endpoints like /api/jobs/process
# Example: ADMIN_EMAILS="admin@example.com,owner@example.com"
ADMIN_EMAILS="admin@example.com"

# ============================================================================
# ANTHROPIC API (Claude AI for Merchant Lookup)
# ============================================================================

# Anthropic API Key - REQUIRED for merchant lookup feature
# Get your API key from: https://console.anthropic.com/
# Format: sk-ant-api03-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
#
# Note: This feature requires an Anthropic API account with credits
# Free tier may have rate limits - check current pricing at anthropic.com
ANTHROPIC_API_KEY="sk-ant-api03-your-key-here"

# ============================================================================
# ERROR MONITORING (Sentry)
# ============================================================================

# Sentry DSN - Server-side error tracking
# Get from: https://sentry.io/settings/[org]/projects/[project]/keys/
# Optional but highly recommended for production
# Leave empty to disable Sentry
SENTRY_DSN=""

# Sentry DSN - Client-side error tracking (public, exposed to browser)
# Same as SENTRY_DSN, but prefixed with NEXT_PUBLIC_ for browser access
# Optional but highly recommended for production
NEXT_PUBLIC_SENTRY_DSN=""

# Sentry Organization Slug
# Found in Sentry URL: https://sentry.io/organizations/[org-slug]/
SENTRY_ORG=""

# Sentry Project Slug
# Found in Sentry URL: https://sentry.io/organizations/[org]/projects/[project-slug]/
SENTRY_PROJECT=""

# Sentry Auth Token - For uploading source maps (optional)
# Create at: https://sentry.io/settings/account/api/auth-tokens/
# Required permissions: project:releases, project:write
# Only needed for production builds with source map upload
SENTRY_AUTH_TOKEN=""

# ============================================================================
# OAUTH PROVIDERS (Optional)
# ============================================================================

# Google OAuth - Optional
# Get credentials from: https://console.cloud.google.com/apis/credentials
# 1. Create OAuth 2.0 Client ID
# 2. Set authorized redirect URI: http://localhost:3000/api/auth/callback/google
# 3. For production, add: https://your-domain.com/api/auth/callback/google
GOOGLE_CLIENT_ID=""
GOOGLE_CLIENT_SECRET=""

# GitHub OAuth - Optional
# Get credentials from: https://github.com/settings/developers
# 1. Create OAuth App
# 2. Set authorization callback URL: http://localhost:3000/api/auth/callback/github
# 3. For production, add: https://your-domain.com/api/auth/callback/github
GITHUB_CLIENT_ID=""
GITHUB_CLIENT_SECRET=""

# Apple OAuth - Optional (requires Apple Developer account)
# Get credentials from: https://developer.apple.com/account/resources/identifiers/list/serviceId
APPLE_CLIENT_ID=""
APPLE_CLIENT_SECRET=""

# ============================================================================
# OPTIONAL: ANALYTICS
# ============================================================================

# Vercel Analytics (automatically enabled in Vercel deployments)
# No configuration needed

# Google Analytics - Optional
# Get tracking ID from: https://analytics.google.com/
# Format: G-XXXXXXXXXX (GA4) or UA-XXXXXXXXX-X (Universal Analytics)
NEXT_PUBLIC_GA_TRACKING_ID=""

# ============================================================================
# OPTIONAL: EMAIL SERVICE (for password reset, notifications)
# ============================================================================

# Email service provider (e.g., SendGrid, Resend, AWS SES)
# Uncomment and configure based on your provider

# SendGrid
# EMAIL_FROM="noreply@smartbudget.com"
# SENDGRID_API_KEY=""

# Resend (Recommended for simplicity)
# EMAIL_FROM="noreply@smartbudget.com"
# RESEND_API_KEY=""

# AWS SES
# EMAIL_FROM="noreply@smartbudget.com"
# AWS_SES_REGION="us-east-1"
# AWS_SES_ACCESS_KEY_ID=""
# AWS_SES_SECRET_ACCESS_KEY=""

# ============================================================================
# FEEDBACK & NOTIFICATIONS (Optional - for team notifications)
# ============================================================================

# Slack Webhook URL - Optional
# For receiving user feedback notifications in Slack
# Setup:
# 1. Create a Slack app at https://api.slack.com/apps
# 2. Enable "Incoming Webhooks" feature
# 3. Create a webhook for your channel
# 4. Copy the webhook URL (https://hooks.slack.com/services/...)
# Note: All feedback is logged to console; Slack is optional for team notifications
SLACK_FEEDBACK_WEBHOOK_URL=""

# Team Email Webhook URL - Optional
# Webhook endpoint for sending high/critical priority feedback via email
# Examples:
# - Zapier webhook: https://hooks.zapier.com/hooks/catch/...
# - Make.com webhook: https://hook.eu1.make.com/...
# - Custom webhook endpoint that forwards to email service
# Note: Only used for HIGH and CRITICAL priority feedback items
TEAM_EMAIL_WEBHOOK_URL=""

# Team Email Address - Optional
# Email address to receive critical feedback notifications
# Default: team@smartbudget.app (if TEAM_EMAIL_WEBHOOK_URL is configured)
TEAM_EMAIL_ADDRESS=""

# ============================================================================
# OPTIONAL: FILE STORAGE (for receipt uploads)
# ============================================================================

# Vercel Blob (Recommended for Vercel deployments)
# Automatically configured in Vercel
# BLOB_READ_WRITE_TOKEN="" # Auto-generated in Vercel

# AWS S3
# AWS_S3_BUCKET=""
# AWS_S3_REGION="us-east-1"
# AWS_S3_ACCESS_KEY_ID=""
# AWS_S3_SECRET_ACCESS_KEY=""

# Cloudflare R2 (S3-compatible)
# R2_ACCOUNT_ID=""
# R2_ACCESS_KEY_ID=""
# R2_SECRET_ACCESS_KEY=""
# R2_BUCKET=""

# ============================================================================
# RATE LIMITING & CACHING
# ============================================================================

# Upstash Redis (for distributed rate limiting and caching)
# Get credentials from: https://console.upstash.com/
#
# FREE TIER AVAILABLE: 10,000 commands/day
#
# Setup:
# 1. Create free Upstash account: https://console.upstash.com/
# 2. Create new Redis database (choose region closest to your deployment)
# 3. Copy REST URL and REST TOKEN from database details
# 4. Add to .env.local
#
# OPTIONAL BUT RECOMMENDED:
# - Without Redis: Falls back to in-memory rate limiting (single-instance only)
# - With Redis: Enables distributed rate limiting across multiple instances
#
# Rate Limit Tiers:
# - STRICT (auth endpoints): 5 requests / 15 minutes
# - EXPENSIVE (ML, import, categorize): 10 requests / hour
# - MODERATE (standard API): 100 requests / 15 minutes
# - LENIENT (read-only): 300 requests / 15 minutes
#
UPSTASH_REDIS_REST_URL=""
UPSTASH_REDIS_REST_TOKEN=""

# ============================================================================
# DEVELOPMENT ONLY
# ============================================================================

# Next.js telemetry (disable for privacy)
# NEXT_TELEMETRY_DISABLED=1

# Debug mode for Prisma queries
# DEBUG="prisma:*"

# Node environment (auto-set by Next.js, but can override)
# NODE_ENV="development"

# ============================================================================
# NOTES
# ============================================================================
#
# SECURITY BEST PRACTICES:
# 1. NEVER commit .env files to Git (they're in .gitignore)
# 2. Use different secrets for each environment (dev, staging, prod)
# 3. Rotate secrets regularly (every 90 days minimum)
# 4. Use strong random values (minimum 32 characters)
# 5. Limit access to production secrets to essential team members only
#
# REQUIRED VARIABLES:
# - DATABASE_URL (always required)
# - NEXTAUTH_SECRET (always required)
# - NEXTAUTH_URL (always required)
# - ADMIN_EMAILS (always required for admin operations)
# - ANTHROPIC_API_KEY (required for merchant lookup feature)
#
# RECOMMENDED VARIABLES:
# - SENTRY_DSN (for error monitoring in production)
# - NEXT_PUBLIC_SENTRY_DSN (for client-side error monitoring)
#
# OPTIONAL VARIABLES:
# - OAuth provider credentials (if using social login)
# - Email service credentials (for password reset, notifications)
# - File storage credentials (for receipt uploads)
# - Analytics credentials (for tracking)
#
# GETTING STARTED:
# 1. Copy this file to .env.local: cp .env.example .env.local
# 2. Fill in required variables (DATABASE_URL, NEXTAUTH_SECRET, NEXTAUTH_URL)
# 3. Generate NEXTAUTH_SECRET: openssl rand -base64 32
# 4. Set up local PostgreSQL database
# 5. Run migrations: npx prisma migrate dev
# 6. Seed database: npm run db:seed
# 7. Start development server: npm run dev
#
# FOR PRODUCTION DEPLOYMENT:
# See DEPLOYMENT.md for complete production setup guide
#
# ============================================================================
